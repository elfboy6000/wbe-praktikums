<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vier gewinnt</title>

    <style>
        div { box-sizing: border-box; }

        .board {
            width: 84vw;
            margin: auto;
            outline: 1px solid black;

            /* 7 columns x 6 rows */
            display: grid;
            grid-template-columns: repeat(7, 12vw);
            grid-auto-rows: 12vw;
        }

        .board .field {
            border: 1px solid black;
            width: 12vw;
            height: 12vw;
        }

        .board .field .piece {
            width: 10vw;
            height: 10vw;
            border-radius: 50%;
            margin: 1vw;
        }

        .board .field .blue { background-color: blue; }
        .board .field .red  { background-color: red; }
    </style>
</head>

<body>
<div class="board"></div>

<!-- helper function elt(...) -->
<script src="elt.js"></script>

<script>
    // Model (state): 6 rows, 7 columns. '' = empty, 'r' = red, 'b' = blue
    let state = {
        board: Array(6).fill('').map(() => Array(7).fill(''))
    };

    function showBoard() {
        const boardEl = document.querySelector('.board');
        boardEl.innerHTML = '';

        for (let row = 0; row < 6; row++) {
            for (let col = 0; col < 7; col++) {
                const cell = state.board[row][col];

                let pieceEl = null;
                if (cell === 'r') pieceEl = elt('div', { class: 'piece red' });
                if (cell === 'b') pieceEl = elt('div', { class: 'piece blue' });

                const fieldEl = elt('div', { class: 'field' }, ...(pieceEl ? [pieceEl] : []));
                boardEl.appendChild(fieldEl);
            }
        }
    }

    function randomizeOneCell() {
        const row = Math.floor(Math.random() * 6);
        const col = Math.floor(Math.random() * 7);

        // 0=empty, 1=red, 2=blue
        const r = Math.floor(Math.random() * 3);
        state.board[row][col] = (r === 0) ? '' : (r === 1) ? 'r' : 'b';
    }

    // initial render
    showBoard();

    // every second: random cell becomes empty/red/blue, then re-render
    setInterval(() => {
        randomizeOneCell();
        showBoard();
    }, 1000);
</script>
</body>
</html>
